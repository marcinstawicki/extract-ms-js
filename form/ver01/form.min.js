var MS=MS||{};
MS.Form=function(){function v(a){(new MS.ForEach).setCollection(a).setResult(function(c,d){0<c&&(d.setAttribute("data-a","1"),d.setAttribute("data-e","0"))})}function t(a){(new MS.ForEach).setCollection(a).setResult(function(c,d){0<c&&(d.setAttribute("data-a","0"),d.setAttribute("data-e","0"))})}function x(a,c){"INPUT"===a.nodeName?""===a.value&&(a.value=c):""===a.textContent&&(a.textContent=c)}function u(a,c){"INPUT"===a.nodeName?a.value===c&&(a.value=""):a.textContent===c&&(a.textContent="")}function E(a,
c,d,h,b){MS.Events().addMouseLeave(c,function(e){(new MS.ForEach).setCollection(b.children).setResult(function(g,f){g=f.children[2];MS.Events().produceBlur(g);f=g.getAttribute("data-p");null!==f&&u(g,f)});t(h.children)});(new MS.ForEach).setCollection(b.children).setResult(function(e,g){var f=g.children[1];e=f.getAttribute("data-p");null!==e&&x(f,e);MS.Events().addFocus(f,function(m){m=f.getAttribute("data-p");null!==m&&u(f,m);v(h.children)});MS.Events().addBlur(f,function(m){});if("text-suggestion"===
a){var k=window.service.suggestionUri.split("?")[0].replace("suggestion","");MS.Events().addKeyUp(g,function(m){document.cookie="suggestion="+g.value+"; expires=; path="+k+";";var q=(new MS.Loading).setElement(g).setStart();(new MS.XmlHttpRequest).setUrl(window.service.suggestionUri).setResult(function(l){!0===l.getResult()?null!==l.getSuccess()?(q.setFinish(),(new MS.Suggestion).setElements(l.getSuccess()).setEvent(m).setInput(this).setResult(function(){})):l.getFailure():console.log(l.getResult())});
document.cookie="suggestion=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path="+k+";"})}})}function F(a,c,d,h,b){MS.Events().addMouseLeave(c,function(e){(new MS.ForEach).setCollection(b.children).setResult(function(g,f){g=f.children[1];MS.Events().produceBlur(g)});t(h.children)});(new MS.ForEach).setCollection(b.children).setResult(function(e,g){var f=g.children[1];MS.Events().addBlur(f,function(k){});MS.Events().addChange(f,function(){g.textContent=this.files[0].name});MS.Events().addClick(d,function(){MS.Events().produceClick(f)})})}
function G(a,c,d,h,b){MS.Events().addMouseLeave(c,function(e){(new MS.ForEach).setCollection(b.children).setResult(function(g,f){g=f.children[2];MS.Events().produceBlur(g);f=g.getAttribute("data-p");null!==f&&u(g,f)});t(h.children)});(new MS.ForEach).setCollection(b.children).setResult(function(e,g){var f=g.children[2];e=f.getAttribute("data-p");null!==e&&x(f,e);MS.Events().addFocus(f,function(k){k=f.getAttribute("data-p");null!==k&&u(f,k);v(h.children);(new MS.CalendarJs).setInput(this).setType(a).setParent(b).setResult()});
MS.Events().addBlur(f,function(k){})})}function H(a,c,d,h,b,e){var g=!1,f=new MS.Relations;MS.Events().addMouseLeave(c,function(){!0===g&&(MS.Events().produceClick(d),g=!1)});a=(new MS.Relation).setActivator(d).addDependant(b);f.addRelation(a);MS.Events().addClick(d,function(m){f.setEvent(m);f.setResult(function(q){!0===q?(g=!0,v(h.children),(new MS.ForEach).setCollection(b.children).setResult(function(l,n){n.setAttribute("data-a",1)}),null!==e&&e.setAttribute("data-a",1)):(g=!1,t(h.children),null!==
e&&(e.innerHTML="",e.setAttribute("data-a",0),MS.Events().produceKeyUp(e),MS.Events().produceBlur(e)),(new MS.ForEach).setCollection(b.children).setResult(function(l,n){"0"===n.children[1].getAttribute("data-s")&&n.setAttribute("data-a","0")}))})});var k=b.getAttribute("data-m");(new MS.ForEach).setCollection(b.children).setResult(function(m,q){MS.Events().addClick(q.children[1],function(){var l=0,n;(new MS.ForEach).setCollection(b.children).setResult(function(w,I){w=I.children[1];"1"===w.getAttribute("data-s")&&
("undefined"===typeof n&&(n=w),l++)});"0"===this.getAttribute("data-s")?(this.setAttribute("data-s",1),this.nextElementSibling.removeAttribute("disabled"),l>=k&&"undefined"!==typeof n&&(n.setAttribute("data-s",0),n.nextElementSibling.setAttribute("disabled","disabled"))):(this.setAttribute("data-s",0),this.nextElementSibling.setAttribute("disabled","disabled"));++l>=k&&MS.Events().produceClick(d)})})}function J(a,c){MS.Events().addClick(control,function(e){(new MS.Event).setOriginal(e).setStopDown().setStopUp().setResult();
switch(identifier){case "paste":y(c);break;case "reset":z(c);break;case "remember":A(c);break;case "forget":B(c)}});var d=!1,h=new MS.Relations;MS.Events().addMouseLeave({},function(){!0===d&&(d=!1,MS.Events().produceClick(a))});var b=(new MS.Relation).setActivator(a).addDependant(a);h.addRelation(b);MS.Events().addClick(a,function(e){h.setEvent(e);h.setResult(function(g){!0===g&&(d=!0)})})}function K(a){(new MS.ForEach).setCollection(p).setResult(function(c,d){(new MS.ForEach).setCollection(d.children).setResult(function(h,
b){y(b)})});a.setAttribute("data-s",0)}function L(a){(new MS.ForEach).setCollection(p).setResult(function(c,d){(new MS.ForEach).setCollection(d.children).setResult(function(h,b){A(b)})});a.setAttribute("data-s",0)}function M(a){(new MS.ForEach).setCollection(p).setResult(function(c,d){(new MS.ForEach).setCollection(d.children).setResult(function(h,b){B(b)})});a.setAttribute("data-s",0)}function N(a){(new MS.ForEach).setCollection(p).setResult(function(c,d){(new MS.ForEach).setCollection(d.children).setResult(function(h,
b){z(b)})});a.setAttribute("data-s",0)}function O(a){(new MS.ForEach).setCollection(p).setResult(function(c,d){P(d)});a.setAttribute("data-s",0)}function P(a){var c=a.parentNode.parentNode.parentNode,d=[];(new MS.ForEach).setCollection(a.children).setResult(function(b,e){b=e.getAttribute("data-s");e=null===b?e.children[0]:e.children[1];"1"!==b&&null!==b||d.push({name:e.name,value:e.value})});a=JSON.stringify(d);var h=window.service.auditUri.split("?")[0].replace("audit","");document.cookie="audit="+
a+"; expires=; path="+h+";";(new MS.XmlHttpRequest).setUrl(window.service.auditUri).setResult(function(b){!0===b.getResult()?null!==b.getSuccess()?(new MS.ForEach).setCollection(c.children).setResult(function(e,g){if(0<e){e=b.getSuccess();var f=g.getAttribute("data-r");g.setAttribute("data-e",!0===e[f]?1:2)}}):b.getFailure():(console.log(b.getResult()),c.setAttribute("data-e",2));document.cookie="audit=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path="+h+";"})}function y(a){var c=a.getAttribute("data-s"),
d=null===c?a.children[0]:a.children[1],h=d.name;localStorage.getItem(h)&&(h=localStorage.getItem(h),null===c?d.value=h:MS.Events().produceClick(a))}function A(a){var c=a.getAttribute("data-s");a=null===c?a.children[0]:a.children[1];"1"!==c&&null!==c||localStorage.setItem(a.name,a.value)}function B(a){var c=a.getAttribute("data-s");a=null===c?a.children[0]:a.children[1];"1"!==c&&null!==c||localStorage.removeItem(a.name)}function z(a){var c=a.getAttribute("data-s"),d=null===c?a.children[0]:a.children[1];
null===c?d.value="":1===c&&MS.Events().produceClick(a)}function Q(a){var c=a.previousElementSibling;null!==c&&MS.Events().addKeyUp(c,function(g){(new MS.LiveSearch).setElements(a).setValueSelector("class","input").setPhrase(this.textContent).setResult()});var d=a.parentNode.previousElementSibling,h=d.parentNode.previousElementSibling,b=h.parentNode,e=d.getAttribute("data-i");switch(e){case "select":case "select-multistage":H(e,b,d,h,a,c);break;case "text":case "text-suggestion":E(e,b,d,h,a);break;
case "file":F(e,b,d,h,a);break;case "date":case "time":case "timestamp":G(e,b,d,h,a)}(new MS.ForEach).setCollection(a).setResult(function(g,f){var k=f.children[0];MS.Events().addClick(k,function(m){J(k,f)})})}var R=Date.now(),r=this,C,p,D;r.setParent=function(a){C=a;return r};r.setResult=function(){var a=C.getElementsByTagName("form");if(0<a.length){a=D=a[0];var c=a.children.length-1;p=a.children[c].getElementsByClassName("collection");(new MS.ForEach).setCollection(a.children).setResult(function(h,
b){if(a.children[c]!==b){var e=b.getAttribute("class");"su"===e&&MS.Events().addKeyUp(a,function(g){!0===(new MS.Keyboard).setEvent(g).setResult().isEnter()&&MS.Events().produceClick(b)});MS.Events().addClick(b,function(g){b.setAttribute("data-s",1);switch(e){case "aa":K(b);break;case "re":N(b);break;case "ar":L(b);break;case "af":M(b);break;case "su":O(b);break;case "de":b.setAttribute("data-s",0);break;case "re1":b.setAttribute("data-s",0)}})}});(new MS.ForEach).setCollection(p).setResult(function(h,
b){Q(b)});var d=Date.now()-R;console.log("milliseconds = "+Math.floor(d))}return r};r.getResult=function(){return D}};
